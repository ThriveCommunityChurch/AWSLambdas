# Test case: "Jesus Is Offensive" - Provocative/challenging title
# Speaker: John Roth
# This tests the model's ability to handle provocative titles without being inflammatory
- vars:
    title: "Jesus Is Offensive"
    speaker: "John Roth"
    date: "2022-05-29"
    transcript: |
      You are listening to a message from Thrive Community Church, a church located in Southwest Florida. For more info, visit us at thrive-fl.org. Lord God, we thank you for this day. We thank you for the opportunity to gather together. We thank you for the freedoms that we have in this country. We thank you for those who have sacrificed so much for us. And we pray, Lord God, that you would bless this time together. We pray that your word would be over us, your truth would be in us, your peace would be upon us. And we pray, Lord God, that you would work through this message to give us the courage to trust you always, to live according to your promises, to walk out into this world and be up to the calling you've given us. And we just pray, Lord God, that those things that would intimidate us, the fears that surround us, the insecurities within us would fade away and our awe and love of you just take over. Bless, Lord, all the churches in our area, all those who are in mission today. We are thankful that there is one Christian church on earth that we're just a part of. We thank you, Lord, for their partnership in the gospel throughout this whole area. And we pray, Lord, that this Memorial Day weekend would be a time of great renewal and gospel growth for your kingdom in southwest Florida. All this we lift up to you in Jesus' name. Amen. So we're in the Gospel of Mark, and we're going to be in chapter 6 today. And I want to start with a question. Have you ever been offended by Jesus? Have you ever been offended by Jesus? I think if you're honest, you probably have been at some point. And I think that's okay. I think that's actually a good thing. Because if you've never been offended by Jesus, you probably haven't really encountered him. You've probably just encountered a version of Jesus that you've created in your own image. And that's not the real Jesus. The real Jesus is offensive. And I don't mean that in a bad way. I mean that in a good way. Because the real Jesus challenges us. The real Jesus confronts us. The real Jesus calls us to something greater than ourselves. And that can be offensive. So let's read from Mark chapter 6, verses 1 through 6. He went away from there and came to his hometown, and his disciples followed him. And on the Sabbath he began to teach in the synagogue, and many who heard him were astonished, saying, Where did this man get these things? What is the wisdom given to him? How are such mighty works done by his hands? Is not this the carpenter, the son of Mary and brother of James and Joses and Judas and Simon? And are not his sisters here with us? And they took offense at him. And Jesus said to them, A prophet is not without honor, except in his hometown and among his relatives and in his own household. And he could do no mighty work there, except that he laid his hands on a few sick people and healed them. And he marveled because of their unbelief. And he went about among the villages teaching. So Jesus goes back to his hometown of Nazareth. And he teaches in the synagogue. And the people are astonished. They're amazed. They're impressed. But then they start to think about it. And they say, Wait a minute. Isn't this the carpenter? Isn't this Mary's son? Isn't this the guy who grew up down the street from us? We know his brothers and sisters. Who does he think he is? And they took offense at him. The Greek word there is skandalizo. It's where we get our word scandal from. And it means to be tripped up, to stumble, to be offended. And it's used throughout the New Testament to describe people's reaction to Jesus. Jesus is a skandalon. He's a stumbling block. He's offensive. And I think there are a few reasons why Jesus is offensive. First, Jesus is offensive because he claims to be God. That's a pretty offensive claim. If I stood up here and said, I am God, you would be offended. You would think I was crazy. And yet that's exactly what Jesus claimed. He claimed to be the Son of God. He claimed to have the authority to forgive sins. He claimed to be the way, the truth, and the life. He claimed that no one comes to the Father except through him. Those are offensive claims. And the people of Nazareth were offended because they knew Jesus. They knew his family. They knew where he came from. And they couldn't reconcile that with his claims to be God. Second, Jesus is offensive because he calls us to repent. Nobody likes to be told they're wrong. Nobody likes to be told they need to change. And yet that's exactly what Jesus does. He calls us to repent. He calls us to turn from our sins. He calls us to follow him. And that's offensive. Because it means admitting that we're not okay the way we are. It means admitting that we need a Savior. It means admitting that we can't save ourselves. And that's offensive to our pride. Third, Jesus is offensive because he doesn't fit our expectations. The people of Nazareth had certain expectations of what the Messiah would be like. And Jesus didn't fit those expectations. He was a carpenter. He was from a small town. He was poor. He didn't have any formal education. He didn't have any political power. He didn't have any military might. And yet he claimed to be the Messiah. And that was offensive to them. Because they wanted a Messiah who would overthrow the Romans. They wanted a Messiah who would restore Israel to its former glory. They wanted a Messiah who would give them what they wanted. And Jesus didn't do that. Jesus came to do something far greater. He came to save us from our sins. He came to reconcile us to God. He came to give us eternal life. But that wasn't what they wanted. And so they were offended. Fourth, Jesus is offensive because he loves the wrong people. Jesus hung out with tax collectors and sinners. He touched lepers. He talked to Samaritans. He forgave prostitutes. He welcomed children. He ate with the outcasts. And that was offensive to the religious leaders of his day. Because they had certain ideas about who was in and who was out. They had certain ideas about who was clean and who was unclean. They had certain ideas about who was worthy of God's love and who wasn't. And Jesus blew all of those ideas out of the water. He loved everyone. He welcomed everyone. He died for everyone. And that was offensive. Because it meant that they weren't special. It meant that they weren't better than everyone else. It meant that they needed a Savior just as much as the tax collectors and sinners. And that was offensive to their pride. Fifth, Jesus is offensive because he calls us to die. Jesus said, If anyone would come after me, let him deny himself and take up his cross and follow me. For whoever would save his life will lose it, but whoever loses his life for my sake and the gospel's will save it. That's offensive. Because we don't want to die. We don't want to deny ourselves. We don't want to take up our cross. We want to live our best life now. We want to be comfortable. We want to be happy. We want to be successful. And Jesus says, No. If you want to follow me, you have to die. You have to die to yourself. You have to die to your desires. You have to die to your plans. You have to die to your dreams. And that's offensive. So what do we do with an offensive Jesus? Well, I think we have two options. We can be offended and walk away. Or we can be offended and fall at his feet. The people of Nazareth chose the first option. They were offended and they walked away. And because of their unbelief, Jesus could do no mighty work there. They missed out on the blessings that Jesus had for them. They missed out on the miracles. They missed out on the healing. They missed out on the salvation. All because they were offended. But there's another option. We can be offended and fall at his feet. We can be offended and say, Lord, I don't understand. I don't like this. This is hard. But I trust you. I believe you. I follow you. And when we do that, something amazing happens. Our offense turns to worship. Our stumbling block becomes our cornerstone. Our scandal becomes our salvation. Because the same Jesus who offends us is the same Jesus who saves us. The same Jesus who calls us to repent is the same Jesus who forgives us. The same Jesus who calls us to die is the same Jesus who gives us life. And so I want to encourage you today. Don't be offended and walk away. Be offended and fall at his feet. Because that's where you'll find grace. That's where you'll find mercy. That's where you'll find life. Let me close with this. On this Memorial Day weekend, we remember those who have given their lives for our freedom. We honor their sacrifice. We are grateful for their service. And I think there's a connection here. Because Jesus also gave his life for our freedom. He sacrificed himself for us. He served us by dying on the cross. And just as we honor those who have died for our country, we should honor the one who died for our souls. So let's not be offended by Jesus. Let's be amazed by him. Let's be grateful for him. Let's worship him. Let's follow him. Even when it's hard. Even when it's offensive. Because he is worth it. He is worth everything. Let's pray. Lord God, thank you for Jesus. Thank you that he is offensive. Thank you that he challenges us. Thank you that he confronts us. Thank you that he calls us to something greater than ourselves. Help us, Lord, not to be offended and walk away. Help us to be offended and fall at your feet. Help us to trust you. Help us to believe you. Help us to follow you. Even when it's hard. Even when it's offensive. We thank you, Lord, for those who have given their lives for our freedom. We honor their sacrifice. We are grateful for their service. And we thank you, Lord, for Jesus, who gave his life for our souls. Help us to honor him. Help us to worship him. Help us to follow him. All this we pray in Jesus' name. Amen.
  assert:
    # ACCURACY VALIDATIONS
    - type: javascript
      value: |
        // Verify quotes appear in transcript (fuzzy match - at least 60% of words)
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const transcript = context.vars.transcript.toLowerCase();
        const quotes = json.quotes || [];
        if (quotes.length === 0) return true;

        function wordOverlap(quote, text) {
          const quoteWords = quote.toLowerCase().replace(/[^\w\s]/g, '').split(/\s+/).filter(w => w.length > 3);
          if (quoteWords.length === 0) return 1;
          const matchCount = quoteWords.filter(w => text.includes(w)).length;
          return matchCount / quoteWords.length;
        }

        const failed = quotes.filter(q => wordOverlap(q.text, transcript) < 0.6);
        return failed.length === 0;
    - type: javascript
      value: |
        // Verify scripture references were mentioned in transcript (with word-to-number normalization)
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const transcript = context.vars.transcript.toLowerCase();

        // Number word mappings
        const ordinals = {first:'1',second:'2',third:'3',fourth:'4',fifth:'5',sixth:'6',seventh:'7',eighth:'8',ninth:'9',tenth:'10',eleventh:'11',twelfth:'12',thirteenth:'13',fourteenth:'14',fifteenth:'15',sixteenth:'16',seventeenth:'17',eighteenth:'18',nineteenth:'19',twentieth:'20',twentyfirst:'21',twentysecond:'22',twentythird:'23',twentyfourth:'24',twentyfifth:'25',twentysixth:'26',twentyseventh:'27',twentyeighth:'28',twentyninth:'29',thirtieth:'30',thirtyfirst:'31'};
        const cardinals = {one:'1',two:'2',three:'3',four:'4',five:'5',six:'6',seven:'7',eight:'8',nine:'9',ten:'10',eleven:'11',twelve:'12',thirteen:'13',fourteen:'14',fifteen:'15',sixteen:'16',seventeen:'17',eighteen:'18',nineteen:'19',twenty:'20',twentyone:'21',twentytwo:'22',twentythree:'23',twentyfour:'24',twentyfive:'25',twentysix:'26',twentyseven:'27',twentyeight:'28',twentynine:'29',thirty:'30',thirtyone:'31',thirtytwo:'32',thirtythree:'33',thirtyfour:'34',thirtyfive:'35',thirtysix:'36',thirtyseven:'37',thirtyeight:'38',thirtynine:'39',forty:'40',fortyone:'41',fortytwo:'42',fortythree:'43',fortyfour:'44',fortyfive:'45',fortysix:'46',fortyseven:'47',fortyeight:'48',fortynine:'49',fifty:'50',fiftyone:'51',fiftytwo:'52',fiftythree:'53',fiftyfour:'54',fiftyfive:'55',fiftysix:'56',fiftyseven:'57',fiftyeight:'58',fiftynine:'59',sixty:'60',sixtyone:'61',sixtytwo:'62',sixtythree:'63',sixtyfour:'64',sixtyfive:'65',sixtysix:'66',sixtyseven:'67',sixtyeight:'68',sixtynine:'69',seventy:'70',seventyone:'71',seventytwo:'72',seventythree:'73',seventyfour:'74',seventyfive:'75',seventysix:'76',seventyseven:'77',seventyeight:'78',seventynine:'79',eighty:'80',eightyone:'81',eightytwo:'82',eightythree:'83',eightyfour:'84',eightyfive:'85',eightysix:'86',eightyseven:'87',eightyeight:'88',eightynine:'89',ninety:'90',ninetyone:'91',ninetytwo:'92',ninetythree:'93',ninetyfour:'94',ninetyfive:'95',ninetysix:'96',ninetyseven:'97',ninetyeight:'98',ninetynine:'99',onehundred:'100',hundred:'100'};
        const books = ['genesis','exodus','leviticus','numbers','deuteronomy','joshua','judges','ruth','samuel','kings','chronicles','ezra','nehemiah','esther','job','psalm','psalms','proverbs','ecclesiastes','song of solomon','isaiah','jeremiah','lamentations','ezekiel','daniel','hosea','joel','amos','obadiah','jonah','micah','nahum','habakkuk','zephaniah','haggai','zechariah','malachi','matthew','mark','luke','john','acts','romans','corinthians','galatians','ephesians','philippians','colossians','thessalonians','timothy','titus','philemon','hebrews','james','peter','jude','revelation'];

        function normalize(text) {
          let t = text.toLowerCase().replace(/[-]/g, ' ');
          // Ordinals for book prefixes (first john -> 1 john)
          for (const [word, num] of Object.entries(ordinals)) {
            t = t.replace(new RegExp('\\b' + word + '\\b', 'g'), num);
          }
          // Cardinals for chapters/verses
          for (const [word, num] of Object.entries(cardinals)) {
            t = t.replace(new RegExp('\\b' + word + '\\b', 'g'), num);
          }
          return t;
        }

        const normTranscript = normalize(transcript);
        const scriptures = [];
        if (json.mainScripture) scriptures.push(json.mainScripture);
        (json.keyPoints || []).forEach(kp => { if (kp.scripture) scriptures.push(kp.scripture); });

        const failed = scriptures.filter(ref => {
          if (!ref || ref.trim() === '') return false;
          const normRef = normalize(ref);
          const bookMatch = normRef.match(/^(\d?\s*[a-z]+)/);
          if (!bookMatch) return false;
          const book = bookMatch[1].replace(/\s+/g, ' ').trim();
          return !normTranscript.includes(book);
        });

        return failed.length === 0;


- description: 'Notes - Joy (Luke 15) - Tests different speaker and positive topic'
  vars:
    title: 'Joy'
    speaker: 'Owen Duncan'
    date: '2024-12-08'
    transcript: |
      I'm Pastor Owen Duncan, Associate Pastor at Faith Lutheran Church in Naples. I'm filling in for Pastor Roth, who's out doing a mission trip with college students.

      You're doing this series, Emotional Jesus, and I got joy. Last week was about Jesus being sad. Compassion wasn't too bad. But joy is an easy one, right?

      I remember a kid at Oktoberfest running around telling everyone: They're about to bring out the ice cream! That's joy. That excitement you just can't keep in, it changes how you look at everything.

      We're going to talk about it in Luke chapter 15, where Jesus tells a parable about what gives him the greatest joy. But first, context matters. Luke 15:1-2 says: Now the tax collectors and sinners were all drawing near to hear Jesus. And the Pharisees and the scribes grumbled, saying, This man receives sinners and eats with them.

      The Pharisees are usually the bad guys, famous for their hypocrisy. But in their day, the Pharisees were the faithful religious leaders, like the pastors of their time. What's driving them here is a sense of justice, of wanting things to be fair.

      There was a man who had two sons. And the younger of them said to his father, Father, give me the share of property that is coming to me. And his father divided his property between them.

      Not many days later, the younger son gathered all he had and took a journey into a far country. And there he squandered his property in reckless living. When he had spent everything, a severe famine arose.

      The son came to himself and said, I will arise and go to my father and say, Father, I have sinned against heaven and before you. I am no longer worthy to be called your son.

      But while he was still a long way off, his father saw him and felt compassion and ran and embraced him and kissed him. The father said to his servants, Bring quickly the best robe and put it on him. For this my son was dead and is alive again. He was lost and is found.

      The father doesn't even give the son a chance to apologize. Caught up in his joy with his son being restored, he forgets all about justice.

      What is the parable about? By telling a story, Jesus is inviting us into a different way of thinking. He's beckoning the Pharisees into a world not ruled by justice, but by mercy, by the grace of God. A world where debts are forgotten and sins are forgiven.

      But there's more. The older son was in the field. And as he came near the house, he heard music and dancing. He was angry and refused to go in. Look, these many years I have served you and I never disobeyed your command. Yet you never gave me a young goat that I might celebrate. But when this son of yours came who has devoured your property with prostitutes, you killed the fattened calf for him.

      The older brother is both jealous and a victim. He's been wronged - half his property is destroyed. And the father has joy over this?

      This is the joy of Jesus. Hebrews tells us: Let us look to Jesus who for the joy that was set before him endured the cross, despising the shame. He didn't think twice about bearing the suffering because of the joy of welcoming you and me into this new world of grace.

      Jesus calls you to leave behind this world of justice and come into his world of grace.
  assert:
    - type: javascript
      value: |
        // Check that summary doesn't start with imperative verb
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const summary = json.summary || '';
        const firstWord = summary.trim().split(/\s+/)[0].toLowerCase();
        const banned = ['stop', 'start', 'begin', 'let', 'take', 'make', 'do', "don't"];
        return !banned.includes(firstWord);
    - type: javascript
      value: |
        // Verify keyPoints array has at least 2 items
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        return json.keyPoints && json.keyPoints.length >= 2;
    - type: javascript
      value: |
        // Check that mainScripture references Luke 15
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const scripture = (json.mainScripture || '').toLowerCase();
        return scripture.includes('luke') && scripture.includes('15');
    # ACCURACY VALIDATIONS
    - type: javascript
      value: |
        // Verify quotes appear in transcript (fuzzy match - at least 60% of words)
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const transcript = context.vars.transcript.toLowerCase();
        const quotes = json.quotes || [];
        if (quotes.length === 0) return true;

        function wordOverlap(quote, text) {
          const quoteWords = quote.toLowerCase().replace(/[^\w\s]/g, '').split(/\s+/).filter(w => w.length > 3);
          if (quoteWords.length === 0) return 1;
          const matchCount = quoteWords.filter(w => text.includes(w)).length;
          return matchCount / quoteWords.length;
        }

        const failed = quotes.filter(q => wordOverlap(q.text, transcript) < 0.6);
        return failed.length === 0;
    - type: javascript
      value: |
        // Verify scripture references were mentioned in transcript
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const transcript = context.vars.transcript.toLowerCase();

        const scriptures = [];
        if (json.mainScripture) scriptures.push(json.mainScripture);
        (json.keyPoints || []).forEach(kp => { if (kp.scripture) scriptures.push(kp.scripture); });

        const failed = scriptures.filter(ref => {
          if (!ref || ref.trim() === '') return false;
          const refLower = ref.toLowerCase();
          const bookMatch = refLower.match(/^(\d?\s*[a-z]+)/);
          if (!bookMatch) return false;
          const book = bookMatch[1].replace(/\s+/g, ' ').trim();
          return !transcript.includes(book);
        });

        return failed.length === 0;
        


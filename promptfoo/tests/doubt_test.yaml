- description: 'Notes - Doubt (Mark 9) - Tests emotional topic handling'
  vars:
    title: 'Doubt'
    speaker: 'John Roth'
    date: '2019-03-03'
    transcript: |
      Welcome to Thrive. We're starting a new sermon series today. Jesus, I have my doubts. Often in a Christian church, Sunday morning is kind of an exercise in whipping up believism. People believing and believing in faith, in faith itself.

      In large swaths of Christianity, no one can really talk about their weaknesses or their waverings or any doubts. If you admit a negative thought, if you question anything, if you're facing grief or sadness, well, all these are a sign of a weak faith, and you are almost shunned.

      I think there has been a don't ask, don't tell policy. Don't ask if somebody's really doing okay. Don't tell anybody any of your struggles.

      We all have doubts, we all have times of sadness, we are all anxious. If you read the Bible honestly, you find it's filled with doubts and temptations and struggles.

      Jude 1:22 says, Be merciful to those who doubt. And Jude probably did doubt - he is the half-brother of Jesus. I don't know if we Christians have really been merciful to those who doubt.

      Let's read Mark 9, verses 14 to 29. When they came to the disciples, they saw a great crowd around them and the scribes arguing with them. Someone from the crowd answered, Teacher, I brought my son to you, for he has a spirit that makes him mute.

      Jesus answered them, Oh, faithless generation, how long am I to be with you? Bring him to me. Jesus asked the father, How long has this been happening? And he said, From childhood. But if you can do anything, have compassion on us and help us.

      Jesus said to him, If you can - all things are possible for one who believes. Immediately, the father of the child cried out, I believe. Help my unbelief.

      Jesus says, This kind cannot be driven out by anything but prayer.

      The disciples had faith, but what was their faith in? They had cast out demons before. They assumed they could just do it whenever they felt like it. That is actually unfaith. The disciples had been tempted to believe that the gift they had received was in their control.

      True faith is not faith in itself. True faith doesn't believe in its own power. True faith continually looks outside of itself. Timothy Keller puts it this way: Helplessness, not holiness, is the first step to access the presence and power of God.

      When you preach faith, you actually are starting to preach works. You turn faith into something you better do. Paul states clearly in Ephesians: For by grace you have been saved through faith. And this is not your own doing. It is the gift of God.

      The Father is honest. He believed, he also has unbelief. He's confused, struggling. And Jesus says, I can work with that. You don't have to get rid of your doubts to come to Jesus. You can bring your doubts to him.

      God gives His most precious gift to this world. When you realize how vulnerable and sacrificial your God is for you, when He looks at you and considers you His most precious treasure to give up everything for you, that's when you can start to offer Him whatever is precious in your life.
  assert:
    - type: javascript
      value: |
        // Check that summary doesn't start with imperative verb
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const summary = json.summary || '';
        const firstWord = summary.trim().split(/\s+/)[0].toLowerCase();
        const banned = ['stop', 'start', 'begin', 'let', 'take', 'make', 'do', "don't", 'doubt'];
        return !banned.includes(firstWord);
    - type: javascript
      value: |
        // Verify keyPoints array has at least 2 items
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        return json.keyPoints && json.keyPoints.length >= 2;
    - type: javascript
      value: |
        // Check that mainScripture references Mark 9
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const scripture = (json.mainScripture || '').toLowerCase();
        return scripture.includes('mark') && scripture.includes('9');
    # ACCURACY VALIDATIONS
    - type: javascript
      value: |
        // Verify quotes appear in transcript (fuzzy match - at least 60% of words)
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const transcript = context.vars.transcript.toLowerCase();
        const quotes = json.quotes || [];
        if (quotes.length === 0) return true;

        function wordOverlap(quote, text) {
          const quoteWords = quote.toLowerCase().replace(/[^\w\s]/g, '').split(/\s+/).filter(w => w.length > 3);
          if (quoteWords.length === 0) return 1;
          const matchCount = quoteWords.filter(w => text.includes(w)).length;
          return matchCount / quoteWords.length;
        }

        const failed = quotes.filter(q => wordOverlap(q.text, transcript) < 0.6);
        return failed.length === 0;
    - type: javascript
      value: |
        // Verify scripture references were mentioned in transcript
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const transcript = context.vars.transcript.toLowerCase();

        const scriptures = [];
        if (json.mainScripture) scriptures.push(json.mainScripture);
        (json.keyPoints || []).forEach(kp => { if (kp.scripture) scriptures.push(kp.scripture); });

        const failed = scriptures.filter(ref => {
          if (!ref || ref.trim() === '') return false;
          const refLower = ref.toLowerCase();
          const bookMatch = refLower.match(/^(\d?\s*[a-z]+)/);
          if (!bookMatch) return false;
          const book = bookMatch[1].replace(/\s+/g, ' ').trim();
          return !transcript.includes(book);
        });

        return failed.length === 0;
        

# Test case: "Do Not Love The World" - Different speaker (Karl Galik), "Do Not" title trap
# Speaker: Karl Galik
# This tests the model's ability to handle imperative titles and different speakers
- vars:
    title: "Do Not Love The World"
    speaker: "Karl Galik"
    date: "2022-07-03"
    transcript: |
      You are listening to a message from Thrive Community Church, a church located in Southwest Florida. For more info visit us at thrive-fl.org. Aloha. Good morning. Welcome to this place and time that God has appointed. That's one thing that I can be absolutely certain is that you are here according to God's will and God's plan and he has a word for you today. If you are expecting Pastor John you are deeply disappointed because this is not Pastor John. I can't take his place. Nobody could take Pastor John's place but I am substituting for him and if I met you last week my name is Carl Galick and I am officially retired and when John heard that he went what and so he's kind of pulled me from that but it's my pleasure to join in the mission that God has given to Thrive and the opportunity that we have to serve together. So we're into Kipuna Aloha. I love the theme. Pastor John said we have a liturgical gar plan for the summer and it's from Goodwill. It's my favorite Hawaiian shirt. I love the thought. Kipuna Aloha is from 1st John. We're looking at the first letter of 1st John and it is a weaving. It is a basket weaving of grace and of the power of love and the way in which God loves and the effect it has on us. Last week Kipuna Aloha I took the reins and talked about the nature of how personal God's love is and how personal it is. So to kind of get that is there's a natural reflex that you and I have to kind of create distance with people even with God's truth and God's love. One of the interesting kind of phenomena is that as part of the human nature is that our deepest need is to be known and our deepest fear is to be known. So there's this constant struggle going on inside of our spirits and our minds because that's always the case. It's always present and so we have a God who wants to know us and wants to be known by us. So here's where we're going it's still personal can we talk personally about anointing away your impulses so because you are stuck with a substitute pastor who is stuck with his own impulses and because I cannot escape my own perspective we're gonna have to ask the spirit to intervene otherwise which can get is a sermon from and about and by and for Carl Galec which is I want you to walk out of here today the understanding that it is the spirit of God that's moving you so let's pray to that same spirit and ask for his blessings father God send your spirit into this place into this room into these hearts into my speech into my opportunity that your will might be done and we might escape the incubate to say the way in which we constantly fight against or follow our impulses which rise instantly automatically and autonomically grant that this letter from John give us insight and power to accomplish your will as you anoint us with your Holy Spirit we thank you for it look forward to it need it desperately in Jesus name so this is what the text is John writes remember John's an old man now he's reflecting there do not love the world or the things in the world that's going to be a focus if anyone loves the world the love of the father is is not in him I can't coexist for all that is in the world the desires of the flesh the desires of the eyes and the pride of life it's not from the father but it's from the world the world is passing away with its desires slash impulses whoever does the will of God abides forever children that's a term of affection we talked about children it is the last hour as you have heard that the Antichrist is coming so now many Antichrist have come therefore we know that it is the last hour they went out from us but they were not of us or if they had been of us they would have continued with us John loves the turn of the phrase then I gotta read that again just to make sure I got it they went out from us but they were not of us or if they had been of us they would have continued with us okay but they went out then it might be complained they are not all complained that they all are not of us but be careful reading that but you have been okay here it is but you have been anointed by the Holy One and you all have knowledge I write to you not because you do not know the truth because you know it's like this kind he could be talking to us because no lies of the truth who is the liar but he who denies that Jesus is the Christ this is key who is the liar but he who denies that Jesus is the Christ this is the Antichrist he defines it this is the Antichrist he who denies the father and the son no one who denies the son has the father whoever confesses the son has the father also that what you heard from the beginning abide in you if you have heard from the beginning abides in you then you too will abide in the son and in the father and this is the promise that he made to us eternal life saying if I get out of my impulses into this Kermadec a seeing things from Carl's perspective the gift the benefit the joy the life oh just eternal life it's big it's big I write these things to you about those who are trying to deceive you but the anointing that you receive from him abides in you and you have no need that anyone should teach you comes from the outside it's supernatural but as his anointing teaches you about everything and it's true and is no lie just as he has taught you abide in him and now little children abide in him so that when he appears we may have confidence and not shrink from him in shame at his coming if you know that he is righteous you may be sure that everyone who practices righteousness has been born of him first John 2 15 to 29 that's the text that John gave to me. So we're gonna basically get focused on all right what are these impulses that they're killing me how does that happening where's that coming from how's that work most importantly the impulses we can kind of sense ourselves let's talk about the anointing of the Holy Spirit almost sounds like other denominations doesn't it the anointing of the Holy Spirit I love it so there's key here do not agape the world it's important that you and I both understand this word and I'm sure your pastor John has gone over this on occasion the word that John uses here for love is this word agape now there are three general words this is probably by way of review for love that are used in the New Testament and they're eros phileo and agape now eros you can hear the word erotic and it's an arrow an eros includes sexual or the erotic but it's far more than that it's about the kind of love that we consume stuff and it's certainly true of sexuality the arrows love that we have and it's not a bad thing it's just when it controls your life might be graphed like this it goes up and down up and down up and down up and down up and down we have needs that are arrows love and then we satisfy them and they go away beyond sexuality think of my arrows for Aurelio's Pizza can I say that here Aurelio's Pizza says which broke my heart I found out the one in the Gulf Coast Center shut down and I'm still in counseling about that but the one in Naples is still open so we're gonna we're gonna be okay Aurelio's Pizza is from Chicago I'm from Chicago and so it's got my food and the sauce is marvelous the thin crust the lots of sausage drinking a Lutheran beverage oh I just love Aurelio's Pizza so I bring to Aurelio's and the arrows I know and they say get this man a pizza quickly and I eat the pizza and I usually eat a little okay all right my wife sitting in front row I got a lot too much and what goes away my arrows of Aurelio's I'm done that's the nature of arrows that comes it's not a bad thing okay it's just not nothing we get it filet oh you know that one too it's brotherly love it's reciprocating love and reciprocating love is not a bad thing once again it's a good thing it's friendships it's one bad one to another we were just talking about that the different communities so which we've been a part of we always share some friends that we stay with us for a long time maybe forever but others fade away and you relationships need reciprocity so filet o'neals reciprocity give and take conversation investment mutual concern and when that begins to fade and the email start to slow down and the phone calls time to go away so does that relationship so that love doesn't have the same up and down curve as arrows but it does flow it does it needs reciprocation not a bad thing except it's just not the thing now we've gotten to a gap a which is the point do not a gap a the world now before I retire in 38 years of the ministry and one of my greatest shortcomings and greatest shortfalls is trying to find the depth of meaning and the incredible power that is present in a gap a I don't know how to say it I don't know how to convey it it is so magnanimous so huge so incredible John ends his gospel lesson I don't want to get too far ahead of myself and should all the things that Jesus has done be written down I suppose the world itself could not contain it I used to think that that was John's hyperbole it ain't it is not as hyperbole it is the truth my dear Christian friends because the nature of loves it comes from God this agape can't be contained in the world it can't be contained in the universe which is an expression of that love it really can't. So what you've got there in very very sneaky ways is John illustrating the interrelationship and interconnectedness of the Trinity by confessing Jesus as Christ you're confessing the entire Trinity never says the word Trinity which isn't mentioned in the Bible at all never tries to get into those complicated things that he does in John 17 of the high priestly prayer he simply says this is what you do when you get anointed when the spirit comes to you when you are what we would know to be baptized in him that's the phenomena that occurs it interconnects and integrates history with today see to it that what you have heard from the beginning remains in you what's delightful for me to see and to talk to is pastors like John who is younger than me and pastors there were even younger than Pastor John who's by the way not so young anymore but that's another story is that they they're the same fervor and teaching and faith and commitment that I did that becomes interconnected when the confession that Jesus is the Christ becomes woven into their world when we get anointed that confession is what comes from the outside to the inside and changes us from there and connects us to those in history who have believed as well it interconnects and integrates this life with eternal life this is what he has promised eternal life. So my life doesn't have to be wondering which impulse will grab or tag me next my life instead is a recognition of the anointing that's what we're going to have communion because I can't get a gap a love on my own it has to come to me I should be baptized into Christ anointed with him feel that strength and that power work its way through my spiritual muscles my life and world and in so doing by communion with bread and wine body and blood of Christ by being together as one by listening to his word by being strengthened in his grace impulses fade and die and we become strengthened in a gap a such as the nature of Kipuna aloha takes all the in Kravat they say impulses that will kill us washes them away and strengthens us with grace in Jesus name amen.
  assert:
    # ACCURACY VALIDATIONS
    - type: javascript
      value: |
        // Verify quotes appear in transcript (fuzzy match - at least 60% of words)
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const transcript = context.vars.transcript.toLowerCase();
        const quotes = json.quotes || [];
        if (quotes.length === 0) return true;

        function wordOverlap(quote, text) {
          const quoteWords = quote.toLowerCase().replace(/[^\w\s]/g, '').split(/\s+/).filter(w => w.length > 3);
          if (quoteWords.length === 0) return 1;
          const matchCount = quoteWords.filter(w => text.includes(w)).length;
          return matchCount / quoteWords.length;
        }

        const failed = quotes.filter(q => wordOverlap(q.text, transcript) < 0.6);
        return failed.length === 0;
    - type: javascript
      value: |
        // Verify scripture references were mentioned in transcript (with word-to-number normalization)
        const json = typeof output === 'string' ? JSON.parse(output) : output;
        const transcript = context.vars.transcript.toLowerCase();

        // Number word mappings
        const ordinals = {first:'1',second:'2',third:'3',fourth:'4',fifth:'5',sixth:'6',seventh:'7',eighth:'8',ninth:'9',tenth:'10',eleventh:'11',twelfth:'12',thirteenth:'13',fourteenth:'14',fifteenth:'15',sixteenth:'16',seventeenth:'17',eighteenth:'18',nineteenth:'19',twentieth:'20',twentyfirst:'21',twentysecond:'22',twentythird:'23',twentyfourth:'24',twentyfifth:'25',twentysixth:'26',twentyseventh:'27',twentyeighth:'28',twentyninth:'29',thirtieth:'30',thirtyfirst:'31'};
        const cardinals = {one:'1',two:'2',three:'3',four:'4',five:'5',six:'6',seven:'7',eight:'8',nine:'9',ten:'10',eleven:'11',twelve:'12',thirteen:'13',fourteen:'14',fifteen:'15',sixteen:'16',seventeen:'17',eighteen:'18',nineteen:'19',twenty:'20',twentyone:'21',twentytwo:'22',twentythree:'23',twentyfour:'24',twentyfive:'25',twentysix:'26',twentyseven:'27',twentyeight:'28',twentynine:'29',thirty:'30',thirtyone:'31',thirtytwo:'32',thirtythree:'33',thirtyfour:'34',thirtyfive:'35',thirtysix:'36',thirtyseven:'37',thirtyeight:'38',thirtynine:'39',forty:'40',fortyone:'41',fortytwo:'42',fortythree:'43',fortyfour:'44',fortyfive:'45',fortysix:'46',fortyseven:'47',fortyeight:'48',fortynine:'49',fifty:'50',fiftyone:'51',fiftytwo:'52',fiftythree:'53',fiftyfour:'54',fiftyfive:'55',fiftysix:'56',fiftyseven:'57',fiftyeight:'58',fiftynine:'59',sixty:'60',sixtyone:'61',sixtytwo:'62',sixtythree:'63',sixtyfour:'64',sixtyfive:'65',sixtysix:'66',sixtyseven:'67',sixtyeight:'68',sixtynine:'69',seventy:'70',seventyone:'71',seventytwo:'72',seventythree:'73',seventyfour:'74',seventyfive:'75',seventysix:'76',seventyseven:'77',seventyeight:'78',seventynine:'79',eighty:'80',eightyone:'81',eightytwo:'82',eightythree:'83',eightyfour:'84',eightyfive:'85',eightysix:'86',eightyseven:'87',eightyeight:'88',eightynine:'89',ninety:'90',ninetyone:'91',ninetytwo:'92',ninetythree:'93',ninetyfour:'94',ninetyfive:'95',ninetysix:'96',ninetyseven:'97',ninetyeight:'98',ninetynine:'99',onehundred:'100',hundred:'100'};
        const books = ['genesis','exodus','leviticus','numbers','deuteronomy','joshua','judges','ruth','samuel','kings','chronicles','ezra','nehemiah','esther','job','psalm','psalms','proverbs','ecclesiastes','song of solomon','isaiah','jeremiah','lamentations','ezekiel','daniel','hosea','joel','amos','obadiah','jonah','micah','nahum','habakkuk','zephaniah','haggai','zechariah','malachi','matthew','mark','luke','john','acts','romans','corinthians','galatians','ephesians','philippians','colossians','thessalonians','timothy','titus','philemon','hebrews','james','peter','jude','revelation'];

        function normalize(text) {
          let t = text.toLowerCase().replace(/[-]/g, ' ');
          // Ordinals for book prefixes (first john -> 1 john)
          for (const [word, num] of Object.entries(ordinals)) {
            t = t.replace(new RegExp('\\b' + word + '\\b', 'g'), num);
          }
          // Cardinals for chapters/verses
          for (const [word, num] of Object.entries(cardinals)) {
            t = t.replace(new RegExp('\\b' + word + '\\b', 'g'), num);
          }
          return t;
        }

        const normTranscript = normalize(transcript);
        const scriptures = [];
        if (json.mainScripture) scriptures.push(json.mainScripture);
        (json.keyPoints || []).forEach(kp => { if (kp.scripture) scriptures.push(kp.scripture); });

        const failed = scriptures.filter(ref => {
          if (!ref || ref.trim() === '') return false;
          const normRef = normalize(ref);
          const bookMatch = normRef.match(/^(\d?\s*[a-z]+)/);
          if (!bookMatch) return false;
          const book = bookMatch[1].replace(/\s+/g, ' ').trim();
          return !normTranscript.includes(book);
        });

        return failed.length === 0;

